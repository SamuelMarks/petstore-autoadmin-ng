<div class="container">
  <h1>{{isEditMode() ? 'Edit' : 'Create'}} {{titleName}}</h1>
  @if (form) {
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-container">
      <mat-form-field appearance="outline"><mat-label>Id</mat-label><input matInput formControlName="id" type="number" ></input></mat-form-field>
<div formGroupName="category" class="nested-form-group"><h3>Category</h3><mat-form-field appearance="outline"><mat-label>Id</mat-label><input matInput formControlName="id" type="number" ></input></mat-form-field>
<mat-form-field appearance="outline"><mat-label>Name</mat-label><input matInput formControlName="name" type="text" ></input></mat-form-field></div>
<mat-form-field appearance="outline"><mat-label>Name</mat-label><input matInput formControlName="name" type="text" required></input></mat-form-field>
<mat-form-field appearance="outline"><mat-label>Photo Urls</mat-label><mat-chip-grid #chipGridPhotoUrls>
                @for (item of photoUrlsSignal | async; track item) {<mat-chip-row (removed)="removePhotoUrls(item)">{{item}}<button matChipRemove><mat-icon>cancel</mat-icon></button></mat-chip-row>}
                <input placeholder="New photoUrl..." [matChipInputFor]="chipGridPhotoUrls" (matChipInputTokenEnd)="addPhotoUrls($event)"/></mat-chip-grid></mat-form-field>
<div class="form-array-container"><div class="form-array-header"><h4>Tags</h4><button type="button" mat-stroked-button (click)="addTag()">
                 <mat-icon>add</mat-icon> Add Tag</button></div><div formArrayName="tags">
                 @for (item of tags.controls; track $index; let i = $index) {
                     <div [formGroupName]="i" class="form-array-item"><div class="form-array-item-fields"><mat-form-field appearance="outline"><mat-label>Id</mat-label><input matInput formControlName="id" type="number" ></input></mat-form-field>
<mat-form-field appearance="outline"><mat-label>Name</mat-label><input matInput formControlName="name" type="text" ></input></mat-form-field></div>
                     <button type="button" mat-icon-button color="warn" (click)="removeTag(i)"><mat-icon>delete</mat-icon></button></div>
                 }</div></div>
<mat-form-field appearance="outline"><mat-label>Status</mat-label><mat-radio-group formControlName="status" ><mat-radio-button value="available">available</mat-radio-button>
<mat-radio-button value="pending">pending</mat-radio-button>
<mat-radio-button value="sold">sold</mat-radio-button></mat-radio-group></mat-form-field>
      <div class="action-buttons">
        <button mat-stroked-button type="button" (click)="onCancel()">Cancel</button>
        <button mat-flat-button color="primary" type="submit" [disabled]="form.invalid || form.pristine">Save</button>
      </div>
    </form>
  }
</div>
