/* @ts-nocheck */
/* eslint-disable */
/* @noformat */
/* @formatter:off */
/**
* Generated by ng-openapi
* Generated provider functions for easy setup
* Do not edit this file manually
*/
import { EnvironmentProviders, Provider, makeEnvironmentProviders } from "@angular/core";
import { HTTP_INTERCEPTORS, HttpInterceptor } from "@angular/common/http";
import { BASE_PATH_DEFAULT, HTTP_INTERCEPTORS_DEFAULT } from "./tokens";
import { DefaultBaseInterceptor } from "./utils/base-interceptor";
import { DateInterceptor } from "./utils/date-transformer";
import { provideHttpClient, withInterceptorsFromDi } from "@angular/common/http";
import { AuthConfig, OAuthService } from "angular-oauth2-oidc";
import { AuthHelperService } from "./auth/auth-helper.service";
import { APP_INITIALIZER, forwardRef } from "@angular/core";
import { AuthInterceptor } from "./auth/auth.interceptor";
import { BEARER_TOKEN_TOKEN } from "./auth/auth.tokens";

export interface DefaultConfig {
    basePath: string;
    enableDateTransform?: boolean;
    interceptors?: (new (...args: never[]) => HttpInterceptor)[];
    apiKey?: string;
}

export function provideDefaultClient(config: DefaultConfig): EnvironmentProviders {

    const providers: Provider[] = [
        { provide: BASE_PATH_DEFAULT, useValue: config.basePath },
        { provide: HTTP_INTERCEPTORS, useClass: DefaultBaseInterceptor, multi: true }
    ];


    // Provide the AuthInterceptor
    providers.push({
        provide: HTTP_INTERCEPTORS,
        useClass: AuthInterceptor,
        multi: true
    });

    // Provide the API key if present
    if (config.apiKey) {
        providers.push({ provide: API_KEY_TOKEN, useValue: config.apiKey });
    }

    // Provide the Bearer/OAuth2 token via the AuthHelperService
    providers.push({
        provide: BEARER_TOKEN_TOKEN,
        useFactory: (authHelper: AuthHelperService) => authHelper.getAccessToken.bind(authHelper),
        deps: [forwardRef(() => AuthHelperService)]
    });


    const customInterceptors = config.interceptors?.map(InterceptorClass => new InterceptorClass()) || [];

    if (config.enableDateTransform !== false && true) {
        customInterceptors.unshift(new DateInterceptor());
    }

    providers.push({
        provide: HTTP_INTERCEPTORS_DEFAULT,
        useValue: customInterceptors
    });

    return makeEnvironmentProviders(providers);
}
